jQuery(document).ready(function(e){if("accepted"!==Cookies.get("agy")||"on"===options.is_debug?(e(".agy").css("display","table"),e(".overlay-verify").css("display","block")):e(options.blur_container).css("filter","blur(0px)"),e("#agy-exit").on("click",function(){window.location.href=options.exit_url}),"age-submit"==options.display_mode&&e("#agy-accept").on("click",function(){e(".agy").hide(),e(".overlay-verify").hide(),"on"!==options.is_debug&&Cookies.set("agy","accepted",{expires:parseInt(options.cookie_lifetime)}),e(options.blur_container).css("filter","blur(0px)")}),"age-select"==options.display_mode&&e("#age-check").on("click",function(){var i=e("#agy-day").val(),o=e("#agy-month").val(),t=e("#agy-year").val(),a=options.age,n=new Date;n.setFullYear(t,o-1,i);var s=new Date;return s.setFullYear(s.getFullYear()-a),""==i||""==o||""==t?(e(".age-message").html("<p>"+options.error_message+"</p>"),!1):s-n<0?(e(".age-message").html("<p>"+options.error_message+"</p>"),!1):(e(".agy").hide(),e(".overlay-verify").hide(),"on"!==options.is_debug&&Cookies.set("agy","accepted",{expires:parseInt(options.cookie_lifetime)}),void e(options.blur_container).css("filter","blur(0px)"))}),"age-slider"==options.display_mode){i=e(".range-slider"),o=e(".range-slider__range"),t=e(".range-slider__value"),i.each(function(){t.each(function(){var i=e(this).prev().attr("value");e(this).html(i)}),o.on("input",function(){e(this).next(t).html(this.value)})}),e("#age-check").on("click",function(){e("#rangeslider").val()>=options.age?(e(".agy").hide(),e(".overlay-verify").hide(),"on"!==options.is_debug&&Cookies.set("agy","accepted",{expires:parseInt(options.cookie_lifetime)}),e(options.blur_container).css("filter","blur(0px)")):e(".age-message").html("<p>"+options.error_message+"</p>")})}var i,o,t;(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0)&&(e(".agy .box").css("width","100%"),e(".agy .box").css("height","55%"),e(".agy .box").css("display","block")),e(document).on("updated_checkout",function(){"yes"===options.block_checkout?e("#place_order").hide():e("#ident_age").hide()}),e(document).on("click","#ident_age",function(){if(e("#billing_country").length)var i=e("#billing_country").val();else i=e("#billing_country option:selected").val();let o={action:"request_verification",first_name:e("#billing_first_name").val(),last_name:e("#billing_last_name").val(),street:e("#billing_address_1").val(),city:e("#billing_city").val(),zipcode:e("#billing_postcode").val(),address_country_id:i};e.ajax({type:"POST",url:options.ajax_url,data:o,dataType:"json",success:function(e){var i=e.cookies[0].value;window.location.href="https://www.sofort.com/payment/agecheck/go/login?SOFUEB="+i}})})});